{"title":"Javascript: expression and operator","date":"2018-07-14T03:29:21.000Z","excerpt":"","slug":"javascript-expression-operator","comments":true,"tags":["note","javascript"],"categories":["language core"],"updated":"2018-07-14T09:20:55.364Z","content":"<blockquote>\n<p>This is the reading note for “Chapter 4: expressions and operators, Javascript: The definitive guide 5th edition”. <br></p>\n</blockquote>\n<p>An <em>expression</em> is a phrase of JS that a JS interpreter can <em>evaluate</em> to produce a value. The most common way to build a complex expression out of simpler expression is with an <em>operator</em>. <br></p>\n<p>The simplest expressions, known as <em>primary expressions</em>, are those that stand alone - they do not include any simpler expressions. Primary expressions in JS are constant or <em>literal</em> values, certain language keywords (reserved words like <code>true</code>, <code>this</code>, <code>null</code>), and variable references. <br></p>\n<p>Object and array <em>initializers</em> are expressions whose value is a newly created object or array. They are not primary expressions since they include subexpressions that specify property and element values.  <code>Undefined</code> elements in an array initializer can be included in an array literal by simply omitting a value between commas. <br></p>\n<p>A property access expression evaluates to the value of an object property or an array element. JS defines two syntaxes for property acess:<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">expression . identifier</span><br><span class=\"line\">expression [expression]</span><br></pre></td></tr></table></figure></p>\n<p>An <em>invocation expression</em> is JS’s syntax for calling (or executing) a function or method. If the function uses a <code>return</code> statement to return a value, then that value becomes the value of the invocation expression. Otherwise, the value of the invocation expression is <code>undefined</code>. In method invocations, the object or array that is the subject of the property access becomes the value of the <code>this</code> parameter while the body of the function is being executed. Invocation expressions that are not method invocations normally use the global object as the value of the <code>this</code>. <br></p>\n<p>An <em>object creation expression</em> creates a new object and invokes a function (called a constructor) to initialize the properties of that object. If no arguments are passed to the constructor function in an object creation expression, the empty pair of parenthese can be omitted: <code>new Object</code>. <br></p>\n<p>Most operators are represented by punctuation characters such as <code>+</code> and <code>=</code>. Some, however, are represented by keywords such as <code>delete</code> and <code>instance</code>. <code>lvalue</code> is a historical term that means an expression that can legally appear on the left side of an assignment expression. In JS, variables, properties of objects, and elements of arrays are lvalues. <br></p>\n<p>For arithmetic expressions,<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"number\">0</span>/<span class=\"number\">0</span> = <span class=\"literal\">NaN</span>;</span><br><span class=\"line\"><span class=\"number\">-5</span> % <span class=\"number\">2</span> = <span class=\"number\">-1</span>;</span><br><span class=\"line\"><span class=\"number\">1</span> + <span class=\"number\">2</span> <span class=\"comment\">// =&gt; 3</span></span><br><span class=\"line\"><span class=\"string\">\"1\"</span> + <span class=\"string\">\"2\"</span> <span class=\"comment\">// =&gt; \"12\"</span></span><br><span class=\"line\"><span class=\"string\">\"1\"</span> + <span class=\"number\">2</span> <span class=\"comment\">// =&gt; \"12\"</span></span><br><span class=\"line\"><span class=\"number\">1</span> + &#123;&#125; <span class=\"comment\">// =&gt; \"1[object Object]\"</span></span><br><span class=\"line\"><span class=\"literal\">true</span> + <span class=\"literal\">true</span> <span class=\"comment\">// =&gt; 2</span></span><br><span class=\"line\"><span class=\"number\">2</span> + <span class=\"literal\">null</span> <span class=\"comment\">// =&gt; 2</span></span><br><span class=\"line\"><span class=\"number\">2</span> + <span class=\"literal\">undefined</span> <span class=\"comment\">// =&gt; NaN</span></span><br></pre></td></tr></table></figure></p>\n<p>For self incremental operator <code>++</code>, expression <code>++x</code> is not always the same as <code>x = x + 1</code>. The <code>++</code> never performs string concatenation. If <code>x</code> is <code>&quot;1&quot;</code>, <code>++x</code> is <code>2</code>, but <code>x+1</code> is the string <code>&quot;11&quot;</code>. </p>\n<p>For relational operators, the difference between the <code>===</code> operator and the <code>==</code> operator is that <code>==</code> allows type conversion. Note that JS objects are compared by reference, not by value. An object is equal to itself, but not to any other object. if two distinct objects have the same number of properties, with the same names and values, they are still not equal. </p>\n<ul>\n<li><code>NaN</code> is never equal to any other value, including itself! Use <code>x!=x</code> to check <code>NaN</code>.</li>\n<li><code>0 === -0</code></li>\n<li>Two strings may have the same meaning and the same visual apperance, but still be encoded using difference sequences of 16-bit values.</li>\n<li>if both values refer to the same object, array, or function, they are equal. </li>\n</ul>\n<p>For less strict <code>==</code>:</p>\n<ul>\n<li><code>null == undefined</code></li>\n<li>If one value is an object and the other is a number or string, convert the object to a primitive. The built-in classes of core JS attempt <code>valueOf()</code> conversion before <code>toString()</code> conversion, except for the Date class, which performs <code>toString()</code> conversion. If its <code>valueOf()</code> method returns a primitive value, that value is used. Otherwise, the return value of its <code>toString()</code> method is used.</li>\n</ul>\n<p>Remember that JS strings are sequences of 16-bit integer values, and that string comparison is just a numerical comparison of the values in the two strings. Note in particular that string comparison is case-sensitive, and all ASCII letters are “less than” all lowercase ASCII letters. Also, operators behave differently for numeric and string operands. <code>+</code> favors strings: it performs concatenation if either operand is a string. The comparison operators favor numbers. </p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"string\">\"11\"</span> &lt; <span class=\"string\">\"3\"</span>   <span class=\"comment\">// String comparison. Result is true.</span></span><br><span class=\"line\"><span class=\"string\">\"11\"</span> &lt; <span class=\"number\">3</span>     <span class=\"comment\">// Numeric comparison. \"11\" converted to 11. Result is false.</span></span><br><span class=\"line\"><span class=\"string\">\"one\"</span> &lt; <span class=\"number\">3</span>    <span class=\"comment\">// Numeric comparison. \"one\" converted to NaN. Result is false.</span></span><br></pre></td></tr></table></figure>\n<p>The <code>in</code> operator expects a left-side operand that is or can be converted to a string. It expects a right-side operand that is an object. it evaluates to <code>true</code> if the left-side value is the <strong>name of a property</strong> of the right-side object. It can be used to check if a key in an object but not an element in an array since element is not the name of property of array.<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> data = [<span class=\"number\">7</span>,<span class=\"number\">8</span>,<span class=\"number\">9</span>];</span><br><span class=\"line\"><span class=\"string\">\"0\"</span> <span class=\"keyword\">in</span> data                <span class=\"comment\">// =&gt; true: array has an element \"0\"</span></span><br><span class=\"line\"><span class=\"number\">1</span> <span class=\"keyword\">in</span> data                  <span class=\"comment\">// =&gt; true: numbers are converted to strings</span></span><br><span class=\"line\"><span class=\"number\">3</span> <span class=\"keyword\">in</span> data                  <span class=\"comment\">// =&gt; false: no element 3</span></span><br></pre></td></tr></table></figure></p>\n<p>The <code>instanceof</code> operator expects a left-side operand that is an object and a right-side operand that identifies a class of objects.<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> d = <span class=\"keyword\">new</span> <span class=\"built_in\">Date</span>();  <span class=\"comment\">// Create a new object with the Date() constructor</span></span><br><span class=\"line\">d <span class=\"keyword\">instanceof</span> <span class=\"built_in\">Date</span>;   <span class=\"comment\">// Evaluates to true; d was created with Date()</span></span><br><span class=\"line\">d <span class=\"keyword\">instanceof</span> <span class=\"built_in\">Object</span>; <span class=\"comment\">// Evaluates to true; all objects are instances of Object</span></span><br><span class=\"line\">d <span class=\"keyword\">instanceof</span> <span class=\"built_in\">Number</span>; <span class=\"comment\">// Evaluates to false; d is not a Number object</span></span><br></pre></td></tr></table></figure></p>\n<p><code>instanceof</code> considers the ‘superclass’ when deciding whether an object is an instance of a class. <br></p>\n<p>For logical operators like <code>&amp;&amp;</code>, it may or may not evaluate its right-side operand. The behavior of <code>&amp;&amp;</code> is sometimes called short ciruiting.<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">if</span> (a == b) stop();</span><br><span class=\"line\">(a == b) &amp;&amp; stop();</span><br></pre></td></tr></table></figure></p>\n<p>Like <code>&amp;&amp;</code>, <code>||</code> may not evaluate the right side expression. <br></p>\n<p>For assignment expression, the <code>=</code> operator expects its left-side operands to be an lvalue: a variable or object property. The value of an assignment expression is the value of the right-side operand. The assignment operator has right-to-left associativity, they are evaluated from right to left. <code>i = j = k = 0</code>. <br></p>\n<p>In most cases, the expression <code>a op =b</code> is equivalent to the expression <code>a = a op b</code>, but two cases differ only if <code>a</code> includes side effects such as a function call or an increment operator. <br></p>\n<p>For <code>typeof</code> operator, it evaluates objects to nothing but <code>object</code> other tan functions, it is only useful to distinguish objects from other prmitive types. <br></p>\n<p><code>delete</code> is unary operator that attempts to delete the object property or array element specified as its operand. Some built-in core and client-side properties are immune from deletion, the user-defined variables declared with the <code>var</code> statement cannot be deleted.<br><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> o = &#123;<span class=\"attr\">x</span>:<span class=\"number\">1</span>, <span class=\"attr\">y</span>:<span class=\"number\">2</span>&#125;;  <span class=\"comment\">// Define a variable; initialize it to an object</span></span><br><span class=\"line\"><span class=\"keyword\">delete</span> o.x;          <span class=\"comment\">// Delete one of the object properties; returns true</span></span><br><span class=\"line\"><span class=\"keyword\">typeof</span> o.x;          <span class=\"comment\">// Property does not exist; returns \"undefined\"</span></span><br><span class=\"line\"><span class=\"keyword\">delete</span> o.x;          <span class=\"comment\">// Delete a nonexistent property; returns true</span></span><br><span class=\"line\"><span class=\"keyword\">delete</span> o;            <span class=\"comment\">// Can't delete a declared variable; returns false.</span></span><br><span class=\"line\">                     <span class=\"comment\">// Would raise an exception in strict mode.</span></span><br><span class=\"line\"><span class=\"keyword\">delete</span> <span class=\"number\">1</span>;            <span class=\"comment\">// Argument is not an lvalue: returns true</span></span><br><span class=\"line\"><span class=\"keyword\">this</span>.x = <span class=\"number\">1</span>;          <span class=\"comment\">// Define a property of the a global object without var</span></span><br><span class=\"line\"><span class=\"keyword\">delete</span> x;            <span class=\"comment\">// Try to delete it: returns true in non-strict mode</span></span><br></pre></td></tr></table></figure></p>\n","prev":{"title":"JS-statements","slug":"JS-statements"},"next":{"title":"Javascript: Objects and variable Intro","slug":"javascript-objects-variable-intro"},"link":"https://whitefusion.github.io/post/javascript-expression-operator"}